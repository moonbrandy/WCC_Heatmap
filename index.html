<!DOCTYPE html>
<html>
  <head>
    <title>WCC_heatmap</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet-src.js"></script>
    <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.js'></script>
    <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-minimap/v1.0.0/Control.MiniMap.js'></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" />
    <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.css' rel='stylesheet' />
    <link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-minimap/v1.0.0/Control.MiniMap.css' rel='stylesheet' />
    <script>
    L.mapbox.accessToken = 'pk.eyJ1IjoibW9vbmJyYW5keSIsImEiOiJudVEyS1o0In0.vmRh_HpjlPovRha6jyBETA';
      function init() {
         var mapBounds = new L.LatLngBounds(
              new L.LatLng(-41.3703, 174.6063),
              new L.LatLng(-41.1064, 174.8967));
          var mapMinZoom = 10;
          var mapMaxZoom = 16;

        var baseMap = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');
        var suburbLayer = L.mapbox.tileLayer('moonbrandy.fistPractice');
        var propLayer = L.mapbox.tileLayer('moonbrandy.WCC_prop');

        var map = L.mapbox.map('map', '', {
        legendControl: {
          position: 'bottomleft'
        }
        })
        .fitBounds(mapBounds);


        var mini_map = new L.Control.MiniMap(L.mapbox.tileLayer('examples.map-i86nkdio')).addTo(map);

        map.legendControl.addLegend(document.getElementById('legend').innerHTML);

        var layerControl = L.control.layers({
          'Base Map': baseMap.addTo(map)
          
        }, {
          'Suberb': suburbLayer,
          'Property': propLayer
        }
        ).addTo(map);



        /*suburbLayer.addTo(map);
        propLayer.addTo(map);*/

        var propLayerGrid = L.mapbox.gridLayer('moonbrandy.WCC_prop').addTo(map);
          L.mapbox.gridControl(propLayerGrid).addTo(map);

        var suburbLayerGrid = L.mapbox.gridLayer('moonbrandy.fistPractice').addTo(map);
          L.mapbox.gridControl(suburbLayerGrid).addTo(map);


        /*if(map.hasLayer(propLayer)) {
          var propLayerGrid = L.mapbox.gridLayer('moonbrandy.WCC_prop').addTo(map);
          L.mapbox.gridControl(propLayerGrid).addTo(map);
        }

        if(map.hasLayer(suburbLayer)){
          var suburbLayerGrid = L.mapbox.gridLayer('moonbrandy.fistPractice').addTo(map);
          L.mapbox.gridControl(suburbLayerGrid).addTo(map);
        }
*/

        /*layerControl.on('overlayadd', function() {
          map.legendControl.removeLegend(document.getElementById('legend').innerHTML);
        });
*/

        

      }
    </script>
    <style>
      html, body, #map { width:100%; height:100%; margin:0; padding:0; }
      /*#map { width: 600px; height: 600px;}*/
    </style>
  </head>
  <body onload="init()">

    <style>
.legend label{
  font-size: 80%;
    list-style: none;
    margin-left: 3px;
    line-height: 18px;
    #margin-bottom: 2px;
}
.legend span {
  display:block;
  float:left;
  height:15px;
  width:20%;
  text-align:center;
  font-size:9px;
  color:#808080;
  }
</style>

    <div id='legend' style='display:none;'>
  <strong>Heatmap legend</strong>
  <nav class='legend clearfix'>
    <span style='background:#006737;'></span><label>more than 5000</label><br />
    <span style='background:#2A8147;'></span><label>4000 to 5000</label><br />
    <span style='background:#559C58;'></span><label>3000 to 4000</label><br />
    <span style='background:#81B768;'></span><label>2000 to 3000</label><br />
    <span style='background:#ACD279;'></span><label>1000 to 2000</label><br />
    <span style='background:#D7ED8A;'></span><label>0 to 1000</label><br />
    <span style='background:#CEC579;'></span><label>-1000 to 0</label><br />
    <span style='background:#C59E68;'></span><label>-2000 to -1000</label><br />
    <span style='background:#BD7758;'></span><label>-3000 to -2000</label><br />
    <span style='background:#B44F47;'></span><label>-4000 to -3000</label><br />
    <span style='background:#AB2836;'></span><label>-5000 to -4000</label><br />
    <span style='background:#A30126;'></span><label>less than -5000</label><br />
    <small>Source: <a href="Harmonic">Harmonic</a></small>
</div>

    <div id="map"></div>
  </body>
</html>
        
